<div class="flex justify-center p-8">
    <img src="../assets/logo_pastoral.webp" class="h-14 md:h-24" />
</div>
<div class="pb-6 md:pb-12 ">
    <div
        class="relative mx-auto max-w-lg p-4 rounded-lg bg-card text-card-foreground h-full bg-opacity-50 sm:shadow-sm sm:p-6 sm:border overflow-y-hidden">
        @if (form.disabled){
        <div class="absolute top-0 left-0 w-full ">
            <mat-progress-bar color="accent" mode="query"></mat-progress-bar>
        </div>
        }
        <div class="space-y-2 text-center mb-10">
            <h1 class="text-3xl font-bold">
                Registro de Estudiante
            </h1>
            <p class="text-gray-500 dark:text-gray-400">
                Completa el formulario con los tus datos.
            </p>
        </div>

        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">
            <div class="grid grid-cols-2 gap-4">

                <!-- FIRST_NAME -->
                <div class="space-y-2">
                    <label
                        class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                        for="first-name">
                        Nombre
                    </label>
                    <input type="text" formControlName="firstName"
                        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:border-amber-300 focus:ring-amber-300 disabled:cursor-not-allowed disabled:opacity-50"
                        id="first-name" placeholder="Juan" maxlength="24"
                        [ngClass]="{ 'border-red-500': submitted && f['firstName'].errors }">
                    @if (submitted && f['firstName'].errors) {
                    <div class="invalid-feedback tracking-wide text-red-500">
                        @if (f['firstName'].errors['required']) {
                        <div>El nombre es obligatorio</div>
                        }
                    </div>
                    }
                </div>

                <!-- LAST_NAME -->
                <div class="space-y-2">
                    <label
                        class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                        for="last-name">
                        Apellidos
                    </label>
                    <input type="text" formControlName="lastName"
                        class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:border-amber-300 focus:ring-amber-300 disabled:cursor-not-allowed disabled:opacity-50"
                        id="last-name" placeholder="Perez" maxlength="32"
                        [ngClass]="{ 'border-red-500': submitted && f['lastName'].errors }">
                    @if (submitted && f['lastName'].errors) {
                    <div class="invalid-feedback tracking-wide text-red-500">
                        @if (f['lastName'].errors['required']) {
                        <div>El apellido es obligatorio</div>
                        }
                    </div>
                    }
                </div>
            </div>

            <!-- CAREER -->
            <div class="space-y-4">
                <!-- <div class="space-y-2">
                    <label
                        class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                        for="last-name">
                        Carrera
                    </label>
                    <div class="relative">
                        <input type="text" formControlName="lastName"
                            class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:border-amber-300 focus:ring-amber-300 disabled:cursor-not-allowed disabled:opacity-50"
                            id="last-name" placeholder="Educación" maxlength="32"
                            [ngClass]="{ 'border-red-500': submitted && f['lastName'].errors }" autocomplete="off"
                            (keyup)="changeAutoComplete($event)">
                        @if(filteredOptions.length){
                        <div
                            class="absolute top-11 left-0 bg-gray-300 rounded-md w-full max-h-32 overflow-x-hidden overscroll-x-contain">
                            @for (carrera of filteredOptions; track carrera.id) {
                            <option [value]="carrera.id"
                                class="flex h-10 w-full bg-background px-3 py-2 text-sm ring-offset-background hover:bg-slate-500">
                                {{ carrera.nombre }}</option>
                            }
                        </div>
                        }
                    </div>
                    @if (submitted && f['lastName'].errors) {
                    <div class="invalid-feedback tracking-wide text-red-500">
                        @if (f['lastName'].errors['required']) {
                        <div>El apellido es obligatorio</div>
                        }
                    </div>
                    }
                </div> -->
                <label
                    class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                    for="career">
                    Carrera Universitaria
                </label>
                <select id="career" name="career" autocomplete="career-name" formControlName="career"
                    class="flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:border-amber-300 focus:ring-amber-300 disabled:cursor-not-allowed disabled:opacity-50 "
                    [ngClass]="{ 'border-red-500': submitted && f['career'].errors }">
                    <option value="" class="text-gray-500">Seleccionar carrera</option>
                    @for (carrera of carreras; track carrera.id) {
                    <option [value]="carrera.id">{{ carrera.nombre }}</option>
                    }
                </select>
                @if (submitted && f['career'].errors) {
                <div class="invalid-feedback tracking-wide text-red-500">
                    @if (f['career'].errors['required']) {
                    <div>Debe seleccionar una carrera</div>
                    }
                </div>
                }

            </div>

            <!-- PHONE -->
            <div class="space-y-2">
                <label
                    class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                    for="phone">
                    Nro. de celular
                </label>
                <input type="tel" formControlName="phone"
                    class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:border-amber-300 focus:ring-amber-300 disabled:cursor-not-allowed disabled:opacity-50"
                    id="phone" placeholder="9567XXXXX" maxlength="9"
                    [ngClass]="{'border-red-500': submitted && f['phone'].errors}">
                @if (submitted && f['phone'].errors) {
                <div class="invalid-feedback tracking-wide text-red-500">
                    @if (f['phone'].errors['required']) {
                    <div>El Nro. de celular es obligatorio</div>
                    }
                </div>
                }
            </div>

            <!-- EMAIL -->
            <div class="space-y-2">
                <label
                    class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                    for="email">
                    Correo Electrónico
                </label>
                <input type="email" formControlName="email"
                    class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:border-amber-300 focus:ring-amber-300 disabled:cursor-not-allowed disabled:opacity-50"
                    id="email" placeholder="ejemplo@mailtrix.net" maxlength="32"
                    [ngClass]="{ 'border-red-500': submitted && f['email'].errors }">
                @if (submitted && f['email'].errors) {
                <div class="invalid-feedback tracking-wide text-red-500">
                    @if (f['email'].errors['required']) {
                    <div>El correo electrónico es obligatorio</div>
                    }
                    @else if (f['email'].errors['email']) {
                    <div>El email no cumple con el formato</div>
                    }
                </div>
                }
            </div>

            <!-- PASSWORD -->
            <div class="space-y-2">
                <label
                    class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                    for="password">
                    Contraseña
                </label>
                <input type="password" formControlName="password"
                    class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:border-amber-300 focus:ring-amber-300 disabled:cursor-not-allowed disabled:opacity-50"
                    id="password" placeholder="*******" maxlength="20"
                    [ngClass]="{ 'border-red-500': submitted && f['password'].errors }">
                @if (submitted && f['password'].errors) {
                <div class="invalid-feedback tracking-wide text-red-500">
                    @if (f['password'].errors['required']) {
                    <div>El Nombre de Usuario es obligatorio</div>
                    }
                    @if (f['password'].errors['minlength']) {
                    <div>Password must be at least 6 characters</div>
                    }
                </div>
                }
            </div>

            <!-- CONFIRMPASSWORD -->
            <div class="space-y-2">
                <label
                    class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
                    for="confirmPassword">
                    Confirmar Contraseña
                </label>
                <input type="password" formControlName="confirmPassword"
                    class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:border-amber-300 focus:ring-amber-300 disabled:cursor-not-allowed disabled:opacity-50"
                    id="confirmPassword" placeholder="*******" maxlength="20"
                    [ngClass]="{ 'border-red-500': submitted && f['confirmPassword'].errors }">
                @if (submitted && f['confirmPassword'].errors) {
                <div class="invalid-feedback tracking-wide text-red-500">
                    @if (f['confirmPassword'].errors['required']) {
                    <div>El Nombre de Usuario es obligatorio</div>
                    }
                    @if (f['confirmPassword'].errors['matching']) {
                    <div>Confirm Password does not match</div>
                    }
                </div>
                }
            </div>

            <!-- ACTIVITIES -->
            <!-- <div>
                <label
                    class="text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 font-semibold">
                    Actividades de Voluntariado
                </label>
                <p class="text-sm text-gray-500 dark:text-gray-400">
                    Selecciona hasta 4 actividades en las que te gustaría participar.
                </p>
            </div>
            <div class="grid gap-2">
                <div (click)="setActivities(1)"
                    class="flex flex-col border rounded-md p-4 cursor-pointer md:hover:bg-amber-100 md:dark:hover:bg-amber-100 transform active:scale-95 transition-transform"
                    [ngClass]="{ 'bg-amber-100': activities.indexOf(1) != -1 }">
                    <button type="button" role="checkbox" aria-checked="false" data-state="unchecked" value="on"
                        class="peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus:outline-none focus:ring-1 focus:border-amber-300 focus:ring-amber-300 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground sr-only"
                        id="sacramentos" (click)="setActivities(1)"></button>
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="w-4 h-4 mr-2">
                            <path
                                d="M11 2a2 2 0 0 0-2 2v5H4a2 2 0 0 0-2 2v2c0 1.1.9 2 2 2h5v5c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2v-5h5a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-5V4a2 2 0 0 0-2-2h-2z">
                            </path>
                        </svg>
                        <label class="peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-sm font-normal"
                            for="sacramentos">
                            Sacramentos
                        </label>
                    </div>
                </div>
                <div (click)="setActivities(2)"
                    class="flex flex-col border rounded-md p-4 cursor-pointer md:hover:bg-amber-100 md:dark:hover:bg-amber-100 transform active:scale-95 transition-transform"
                    [ngClass]="{ 'bg-amber-100': activities.indexOf(2) != -1 }">
                    <button type="button" role="checkbox" aria-checked="false" data-state="unchecked" value="on"
                        class="peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus:outline-none focus:ring-1 focus:border-amber-300 focus:ring-amber-300 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground sr-only"
                        id="albergue"></button>
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="w-4 h-4 mr-2">
                            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                        </svg>
                        <label class="peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-sm font-normal"
                            for="albergue">
                            Albergue
                        </label>
                    </div>
                </div>
                <div (click)="setActivities(3)"
                    class="flex flex-col border rounded-md p-4 cursor-pointer md:hover:bg-amber-100 md:dark:hover:bg-amber-100 transform active:scale-95 transition-transform"
                    [ngClass]="{ 'bg-amber-100': activities.indexOf(3) != -1 }">
                    <button type="button" role="checkbox" aria-checked="true" data-state="checked" value="on"
                        class="peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus:outline-none focus:ring-1 focus:border-amber-300 focus:ring-amber-300 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground sr-only"
                        id="coro">
                        <span data-state="checked" class="flex items-center justify-center text-current"
                            style="pointer-events:none">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="h-4 w-4">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                        </span>
                    </button>
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="w-4 h-4 mr-2">
                            <path d="M9 18V5l12-2v13"></path>
                            <circle cx="6" cy="18" r="3"></circle>
                            <circle cx="18" cy="16" r="3"></circle>
                        </svg>
                        <label class="peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-sm font-normal"
                            for="coro">
                            Coro/Canto
                        </label>
                    </div>
                </div>
                <div class="flex flex-col border rounded-md p-4 cursor-not-allowed opacity-50"><button type="button"
                        role="checkbox" aria-checked="false" data-state="unchecked" data-disabled="" disabled=""
                        value="on"
                        class="peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus:outline-none focus:ring-1 focus:border-amber-300 focus:ring-amber-300 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground sr-only"
                        id="taller"></button>
                    <div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-2">
                            <path d="m18 7 4 2v11a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9l4-2"></path>
                            <path d="M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4"></path>
                            <path d="M18 22V5l-6-3-6 3v17"></path>
                            <path d="M12 7v5"></path>
                            <path d="M10 9h4"></path>
                        </svg>
                        <label class="peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-sm font-normal"
                            for="taller">
                            Taller de oración
                        </label>
                    </div>
                </div>
            </div> -->
            <button mat-fab extended
                class="inline-flex h-12 mt-12 items-center justify-center whitespace-nowrap shadow-md border-2 border-amber-300/100 bg-amber-50 rounded-md text-sm font-medium ring-offset-background transition-colors focus:outline-none focus:ring-1 focus:border-amber-400 focus:ring-amber-400 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground text-gray-700 hover:bg-amber-100 h-10 px-4 py-2 w-full transform active:scale-95 transition-transform"
                type="submit" [disabled]="form.disabled">
                REGISTRAR
            </button>
        </form>

    </div>
</div>